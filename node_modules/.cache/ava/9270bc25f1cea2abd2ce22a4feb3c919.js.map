{"version":3,"sources":["customer.js"],"names":["rewire","require","myModule","caesarsLoggerMock","log","a","b","c","d","pgMock","connect","httpMock","parseRequestForParameters","Map","__set__","t","addCustomerInfo","true","getCustomers","requestParameters","Object","paramMap","set","statement","buildCustomerQueryStatement","is"],"mappings":";;;;AAAA;;;;;;AAEA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEA,IAAIC,WAAWF,OAAO,sBAAP,CAAf;;AAEA,IAAIG,oBAAoB;AACpBC,SAAM,UAASC,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB,CAAE;AADL,CAAxB;;AAIA,IAAIC,SAAQ;AACRC,aAAU,UAASL,CAAT,EAAWC,CAAX,EAAa,CAAE;AADjB,CAAZ;;AAIA,IAAIK,WAAW;AACdC,+BAA4B,UAASP,CAAT,EAAWC,CAAX,EAAa;AACxC,eAAO,IAAIO,GAAJ,EAAP;AACA;AAHa,CAAf;;AAMAX,SAASY,OAAT,CAAiB,QAAjB,EAA2BX,iBAA3B;AACAD,SAASY,OAAT,CAAiB,IAAjB,EAAuBL,MAAvB;AACAP,SAASY,OAAT,CAAiB,WAAjB,EAA6BH,QAA7B;;AAGA,mBAAK,mBAAL,EAA2BI,KAAK;AAC5Bb,aAASc,eAAT,CAAyB,IAAzB,EAA8B,IAA9B,EAAmC,IAAnC;AACAD,MAAEE,IAAF,CAAO,IAAP;AACH,CAHD;;AAKA,mBAAK,eAAL,EAAuBF,KAAK;AACxBb,aAASgB,YAAT,CAAsB,IAAtB,EAA2B,IAA3B,EAAgC,IAAhC;AACAH,MAAEE,IAAF,CAAO,IAAP;AACH,CAHD;;AAKA,mBAAK,gCAAL,EAAuCF,KAAK;;AAE3C,QAAII,oBAAoB,IAAIC,MAAJ,EAAxB;AACAD,sBAAkB,YAAlB,IAAkC,GAAlC;AACAA,sBAAkB,WAAlB,IAAgC,QAAhC;;AAEA,QAAIE,WAAW,IAAIR,GAAJ,EAAf;AACAQ,aAASC,GAAT,CAAa,YAAb,EAA0B,IAA1B;AACAD,aAASC,GAAT,CAAa,WAAb,EAAyB,sBAAzB;;AAEA,QAAIC,YAAYrB,SAASsB,2BAAT,CAAqCL,iBAArC,EAAuDE,QAAvD,CAAhB;AACAN,MAAEU,EAAF,CAAKF,SAAL,EAAe,sFAAf;AACA,CAZD","file":"customer.js","sourcesContent":["import test from 'ava';\r\n\r\nvar rewire = require(\"rewire\");\r\n\r\nvar myModule = rewire(\"../model/customer.js\");\r\n\r\nvar caesarsLoggerMock = {\r\n    log : function(a,b,c,d){}\r\n}\r\n\r\nvar pgMock ={\r\n    connect : function(a,b){}\r\n}\r\n\r\nvar httpMock = {\r\n\tparseRequestForParameters : function(a,b){\r\n\t\treturn new Map();\r\n\t}\r\n}\r\n\r\nmyModule.__set__(\"logger\", caesarsLoggerMock);\r\nmyModule.__set__(\"pg\", pgMock);\r\nmyModule.__set__(\"httpUtils\",httpMock);\r\n\r\n\r\ntest('add customer Info',  t => {\r\n    myModule.addCustomerInfo(null,null,null);\r\n    t.true(true);\r\n});\r\n\r\ntest('get customers',  t => {\r\n    myModule.getCustomers(null,null,null);\r\n    t.true(true);\r\n});\r\n\r\ntest('build Customer Query Statement', t => {\r\n\t\r\n\tvar requestParameters = new Object();\r\n\trequestParameters['ExternalId'] = '1';\r\n\trequestParameters['FirstName'] ='Mickey';\r\n\t\r\n\tvar paramMap = new Map();\r\n\tparamMap.set('ExternalId','id');\r\n\tparamMap.set('FirstName','data->>\\'firstName\\'');\r\n\t\r\n\tlet statement = myModule.buildCustomerQueryStatement(requestParameters,paramMap);\r\n\tt.is(statement,'SELECT id, data FROM CustomerInfo WHERE id = 1 AND data->>\\'firstName\\' = \\'Mickey\\'');\r\n});"]}